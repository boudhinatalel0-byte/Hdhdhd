<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameHub Pro | Ø³ÙˆÙ‚ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #FFD700;
            --primary-hover: #e6c200;
            --bg-dark: #0e0e0e;
            --bg-light: #f8f9fa;
            --card-dark: #1a1a1a;
            --card-light: #ffffff;
            --text-dark: #ffffff;
            --text-light: #2d3436;
            --accent: #2ecc71;
        }

        body {
            margin: 0;
            font-family: 'Cairo', sans-serif;
            background: var(--bg-dark);
            color: var(--text-dark);
            transition: 0.3s;
            padding-bottom: 80px;
        }

        body.light { background: var(--bg-light); color: var(--text-light); }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        header {
            text-align: center;
            padding: 15px;
            background: #000;
            color: var(--primary);
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .light header { background: #fff; border-bottom: 1px solid #ddd; }

        /* Ø§Ù„ÙØ¦Ø§Øª (Categories) */
        .categories {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 15px;
            scrollbar-width: none;
        }
        .categories::-webkit-scrollbar { display: none; }
        .cat-btn {
            background: #222;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            white-space: nowrap;
            border: 1px solid #333;
            cursor: pointer;
            font-size: 14px;
        }
        .light .cat-btn { background: #eee; color: #333; border: 1px solid #ddd; }
        .cat-btn.active { background: var(--primary); color: #000; border-color: var(--primary); }

        .section { display: none; padding: 15px; max-width: 600px; margin: auto; }
        .active { display: block; animation: slideUp 0.4s ease; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
        input, textarea, select {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border-radius: 12px;
            border: 1px solid #333;
            background: #1a1a1a;
            color: white;
            box-sizing: border-box;
            font-family: 'Cairo';
        }
        .light input, .light textarea, .light select { background: #fff; color: #000; border: 1px solid #ccc; }

        .button {
            background: var(--primary);
            color: black;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }

        /* ÙƒØ±Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ø³Ù† */
        .card {
            background: var(--card-dark);
            border-radius: 18px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            border: 1px solid #222;
        }
        .light .card { background: var(--card-light); border-color: #eee; }
        .card img { width: 100%; height: 220px; object-fit: cover; }
        .card-body { padding: 15px; }
        .card-title { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .price { color: var(--accent); font-size: 22px; font-weight: bold; }
        .wa-btn {
            background: #25d366;
            color: white;
            text-decoration: none;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            font-weight: bold;
        }

        /* Ø§Ù„Ù…Ù†ÙŠÙˆ Ø§Ù„Ø³ÙÙ„ÙŠ */
        .nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            padding: 12px 0;
            border-top: 1px solid #222;
        }
        .light .nav { background: rgba(255,255,255,0.9); border-top: 1px solid #eee; }
        .nav button { background: none; border: none; font-size: 22px; color: #666; cursor: pointer; }
        .nav button.active-link { color: var(--primary); }

        .preview-img { width: 100%; height: 150px; border-radius: 12px; object-fit: cover; margin: 10px 0; border: 2px dashed #444; }
    </style>
</head>
<body onload="loadPosts()">

<header>GameHub Market Pro</header>

<div id="home" class="section active">
    <div class="categories">
        <button class="cat-btn active" onclick="filterGame('Ø§Ù„ÙƒÙ„')">Ø§Ù„ÙƒÙ„</button>
        <button class="cat-btn" onclick="filterGame('Ø¨Ø¨Ø¬ÙŠ')">Ø¨Ø¨Ø¬ÙŠ</button>
        <button class="cat-btn" onclick="filterGame('ÙØ±ÙŠ ÙØ§ÙŠØ±')">ÙØ±ÙŠ ÙØ§ÙŠØ±</button>
        <button class="cat-btn" onclick="filterGame('Ø±ÙˆØ¨Ù„ÙˆÙƒØ³')">Ø±ÙˆØ¨Ù„ÙˆÙƒØ³</button>
    </div>
    <div id="postsList"></div>
</div>

<div id="sell" class="section">
    <h2 data-key="sellTitle">Ù†Ø´Ø± Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
    <select id="gameCat">
        <option value="Ø¨Ø¨Ø¬ÙŠ">Ø¨Ø¨Ø¬ÙŠ (PUBG)</option>
        <option value="ÙØ±ÙŠ ÙØ§ÙŠØ±">ÙØ±ÙŠ ÙØ§ÙŠØ± (Free Fire)</option>
        <option value="Ø±ÙˆØ¨Ù„ÙˆÙƒØ³">Ø±ÙˆØ¨Ù„ÙˆÙƒØ³ (Roblox)</option>
        <option value="Ø£Ø®Ø±Ù‰">Ù„Ø¹Ø¨Ø© Ø£Ø®Ø±Ù‰</option>
    </select>
    <input type="text" id="level" placeholder="Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø³Ø§Ø¨ (Level)">
    <input type="number" id="price" placeholder="Ø§Ù„Ø«Ù…Ù† (Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±)">
    <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ (Ù…Ø«Ø§Ù„: 216xxxxxxx)">
    <textarea id="desc" placeholder="ÙˆØµÙ Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ø³ÙƒÙŠÙ†Ø§ØªØŒ Ø§Ù„Ø£Ø³Ù„Ø­Ø©...)"></textarea>
    
    <input type="file" id="fileInput" accept="image/*" onchange="handleImage(event)" style="display:none;">
    <button class="button" style="background:#333; color:white;" onclick="document.getElementById('fileInput').click()">ğŸ“¸ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©</button>
    <img id="preview" class="preview-img" style="display:none;">

    <button class="button" onclick="savePost()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ø´Ø±</button>
</div>

<div id="settings" class="section">
    <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
    <label>Ù…Ø¸Ù‡Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:</label>
    <select onchange="changeMode(this.value)">
        <option value="dark">Ø¯Ø§ÙƒÙ† (Dark)</option>
        <option value="light">ÙØ§ØªØ­ (Light)</option>
    </select>
    <button class="button" style="background:#ff4757; color:white; margin-top:50px;" onclick="clearData()">ğŸ—‘ Ù…Ø³Ø­ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
</div>

<div class="nav">
    <button onclick="showPage('home', this)" class="active-link">ğŸ </button>
    <button onclick="showPage('sell', this)">â•</button>
    <button onclick="showPage('settings', this)">âš™ï¸</button>
</div>

<script>
let currentImg = "";

// ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
function showPage(id, btn) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active-link'));
    btn.classList.add('active-link');
}

// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø© ÙˆØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ù„Ù†Øµ ØµØºÙŠØ±
function handleImage(e) {
    const reader = new FileReader();
    reader.onload = () => {
        currentImg = reader.result;
        document.getElementById('preview').src = currentImg;
        document.getElementById('preview').style.display = "block";
    };
    reader.readAsDataURL(e.target.files[0]);
}

// Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† ÙÙŠ LocalStorage
function savePost() {
    const game = document.getElementById('gameCat').value;
    const price = document.getElementById('price').value;
    const phone = document.getElementById('phone').value;
    const level = document.getElementById('level').value;
    const desc = document.getElementById('desc').value;

    if(!price || !phone) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø³Ø¹Ø± ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ!");

    const newPost = { game, price, phone, level, desc, img: currentImg, id: Date.now() };
    
    let posts = JSON.parse(localStorage.getItem('gamePosts') || "[]");
    posts.unshift(newPost);
    localStorage.setItem('gamePosts', JSON.stringify(posts));

    alert("ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­!");
    location.reload(); // Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶Ù‡Ø§
function loadPosts() {
    const posts = JSON.parse(localStorage.getItem('gamePosts') || "[]");
    const container = document.getElementById('postsList');
    container.innerHTML = posts.length ? "" : "<p style='text-align:center; color:#666;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</p>";

    posts.forEach(post => {
        container.innerHTML += `
            <div class="card" data-game="${post.game}">
                <img src="${post.img || 'https://via.placeholder.com/400x200?text=No+Image'}">
                <div class="card-body">
                    <div class="card-title">
                        <h3>${post.game}</h3>
                        <span class="price">${post.price} DT</span>
                    </div>
                    <p style="font-size:14px; color:#aaa; margin:0;">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${post.level}</p>
                    <p style="font-size:13px; margin:10px 0;">${post.desc}</p>
                    <a href="https://wa.me/${post.phone}?text=Ù…Ù‡ØªÙ… Ø¨Ø­Ø³Ø§Ø¨ ${post.game}" class="wa-btn">
                        ğŸ’¬ ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                    </a>
                </div>
            </div>
        `;
    });
}

// Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ØªØ±Ø©
function filterGame(name) {
    document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
    event.target.classList.add('active');
    
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        if(name === 'Ø§Ù„ÙƒÙ„' || card.dataset.game === name) card.style.display = "block";
        else card.style.display = "none";
    });
}

function changeMode(mode) {
    if(mode === 'light') document.body.classList.add('light');
    else document.body.classList.remove('light');
}

function clearData() {
    if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§ØªØŸ")) {
        localStorage.clear();
        location.reload();
    }
}
</script>
</body>
</html>
